(this["webpackJsonpembawood-frontend-task"]=this["webpackJsonpembawood-frontend-task"]||[]).push([[0],{110:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(20),o=n.n(r),i=(n(83),n(6)),s=n(56),l=n.n(s),j="https://api.itbook.store/1.0",b=function(e,t){return l.a.get("".concat(j,"/search/").concat(e,"/").concat(t)).then((function(e){return e.data}))},u=function(e,t){return l.a.get("".concat(j,"/search/").concat(e,"/").concat(t)).then((function(e){return e.data}))},d=function(e){return l.a.get("".concat(j,"/search/").concat(e)).then((function(e){return e.data}))},O="GET_BOOKS",h="SET_TOTAL_BOOKS",f="GET_CURRENT_PAGE",p="SET_QUERY",x=n(25),g=n(16),k=n(117),m=n(118),y=n(71),v=function(e){return JSON.parse(localStorage.getItem(e))},C=function(e,t){localStorage.setItem(e,JSON.stringify(t))},S=n(1),P=function(e){var t=e.cart,n=Object(c.useState)(t),a=Object(i.a)(n,2),r=a[0],o=a[1],s=function(e,t){var n=r.find((function(t){return t.isbn13===e.isbn13}));if(t)n.count++,o(Object(g.a)(r));else{if(n.count--,n.count<1){var c=r.filter((function(e){return e.isbn13!==n.isbn13}));return o(Object(g.a)(c)),void C("books",c)}o(Object(g.a)(r))}C("books",r)};return Object(S.jsx)("div",{className:"container my-4",children:Object(S.jsxs)(k.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Image"}),Object(S.jsx)("th",{children:"title"}),Object(S.jsx)("th",{children:"Price"}),Object(S.jsx)("th",{children:"Details"}),Object(S.jsx)("th",{children:"Count"}),Object(S.jsx)("th",{children:"Options"})]})}),Object(S.jsx)("tbody",{children:null===r||void 0===r?void 0:r.map((function(e){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)("img",{src:e.image,width:"150px"})}),Object(S.jsx)("td",{children:e.title}),Object(S.jsx)("td",{children:e.price}),Object(S.jsx)("td",{children:Object(S.jsx)("a",{href:e.url,target:"_blank",children:"Book details"})}),Object(S.jsx)("td",{children:e.count}),Object(S.jsx)("td",{children:Object(S.jsxs)(m.a,{size:"lg",className:"mb-2",children:[Object(S.jsx)(y.a,{className:"mx-2",onClick:function(){return s(e,!0)},children:"+"}),Object(S.jsx)(y.a,{className:"mx-2",onClick:function(){return s(e,!1)},children:"-"})]})})]})}))})]})})},N=n(72),_=n.n(N),w=n(38),T=n(121),E=n(119),B=n(123),I=n(120),q=n(122),A=n(75),F=function(e){var t=e.searchBooks,n=e.count,a=Object(c.useState)(""),r=Object(i.a)(a,2),o=r[0],s=r[1],l=function(e){e.preventDefault(),t(o),s("")};return Object(S.jsx)("header",{className:_.a.header,children:Object(S.jsx)(T.a,{bg:"dark",expand:"lg",variant:"dark",fixed:"top",children:Object(S.jsxs)(E.a,{fluid:!0,children:[Object(S.jsx)(T.a.Brand,{href:"#",children:"Navbar scroll"}),Object(S.jsx)(T.a.Toggle,{"aria-controls":"navbarScroll"}),Object(S.jsxs)(T.a.Collapse,{id:"navbarScroll",children:[Object(S.jsxs)(B.a,{className:"me-auto my-2 my-lg-0",style:{maxHeight:"100px"},navbarScroll:!0,children:[Object(S.jsx)(w.b,{to:"/embawood-frontend-task",children:"Home"}),Object(S.jsxs)(I.a,{title:"Link",id:"navbarScrollingDropdown",children:[Object(S.jsx)(I.a.Item,{href:"#action3",children:"Action"}),Object(S.jsx)(I.a.Item,{href:"#action4",children:"Another action"}),Object(S.jsx)(I.a.Divider,{}),Object(S.jsx)(I.a.Item,{href:"#action5",children:"Something else here"})]}),Object(S.jsxs)(w.b,{to:"/cart",children:["Shopping Cart ",Object(S.jsx)("span",{children:n})]})]}),Object(S.jsxs)(q.a,{className:"d-flex",onSubmit:l,children:[Object(S.jsx)(A.a,{type:"search",placeholder:"Search",className:"me-2","aria-label":"Search",value:o,onChange:function(e){return s(e.target.value)}}),Object(S.jsx)(y.a,{variant:"outline-success",onClick:l,children:"Search"})]})]})]})})})},D=n(2),J=n(124),L=function(e){var t=e.title,n=e.image,c=e.subtitle,a=e.url,r=e.addToCart;return Object(S.jsxs)(J.a,{style:{width:"18rem"},children:[Object(S.jsx)(J.a.Img,{variant:"top",src:n}),Object(S.jsxs)(J.a.Body,{children:[Object(S.jsx)(J.a.Title,{children:t}),Object(S.jsx)(J.a.Text,{children:c}),Object(S.jsx)(y.a,{variant:"primary",onClick:function(){return function(e){window.open(e,"_blank")}(a)},children:"See details"}),Object(S.jsx)(y.a,{variant:"primary",className:"ms-2",onClick:r,children:"Add to cart"})]})]})},W=n(76),G=n.n(W),H=function(e){var t=e.books,n=e.setCount;return Object(S.jsx)("div",{className:G.a.booksWrapper,children:t.map((function(e){return Object(S.jsx)(L,{image:e.image,title:e.title,subtitle:e.subtitle,url:e.url,addToCart:function(){return function(e){if(v("books")){var t=JSON.parse(localStorage.getItem("books"));t.find((function(t){return t.isbn13===e.isbn13}))?(t.find((function(t){return t.isbn13===e.isbn13})).count++,C("books",Object(g.a)(t))):C("books",[].concat(Object(g.a)(t),[Object(D.a)(Object(D.a)({},e),{},{count:1})]))}else C("books",[Object(D.a)(Object(D.a)({},e),{},{count:1})]);n(v("books").length)}(e)}},e.isbn13)}))})},M=n(125),R=function(e){var t=e.total,n=e.booksPerPage,c=e.page,a=e.query,r=e.getCurrentPage,o=Number(c),i=[],s=Math.ceil(t/n);if(isFinite(s))for(var l=function(e){i=[].concat(Object(g.a)(i),[Object(S.jsx)(M.a.Item,{active:e===o,onClick:function(){return r(a,e)},children:e},e)])},j=1;j<=s;j++)l(j);return Object(S.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(S.jsxs)(M.a,{children:[Object(S.jsx)(M.a.First,{onClick:function(){return r(1)},disabled:1===o}),Object(S.jsx)(M.a.Prev,{onClick:function(){return r(o-1)},disabled:1===o}),i.map((function(e,t){return t<2||t>s-3||t>o-2&&t<o+2||t>o-3&&t<o+3?e:t===o+3||t===o-3?Object(S.jsx)(M.a.Ellipsis,{}):null})),Object(S.jsx)(M.a.Next,{onClick:function(){return r(o+1)},disabled:o===s}),Object(S.jsx)(M.a.Last,{onClick:function(){return r(s)},disabled:o===s})]})})},K=function(e){var t=e.books,n=e.total,c=e.booksPerPage,a=e.page,r=e.query,o=e.getCurrentPage,i=e.setCount;return Object(S.jsxs)("div",{children:[Object(S.jsx)(H,{books:t,setCount:i}),Object(S.jsx)(R,{total:n,booksPerPage:c,page:a,query:r,getCurrentPage:o})]})},U=n(7);n(110);var z=function(){var e=Object(x.b)(),t=Object(x.c)((function(e){return e.books})),n=Object(x.c)((function(e){return e.query})),a=Object(x.c)((function(e){return e.page})),r=Object(x.c)((function(e){return e.total})),o=Object(x.c)((function(e){return e.booksPerPage})),s=v("books"),l=Object(c.useState)(null===s||void 0===s?void 0:s.length),j=Object(i.a)(l,2),g=j[0],k=j[1];return Object(c.useEffect)((function(){e(function(e,t){return function(n){b(e,t).then((function(e){n({type:O,payload:e.books}),n({type:h,payload:e.total}),n({type:f,payload:e.page})}))}}(n,a))}),[a]),Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(F,{query:n,searchBooks:function(t){e(function(e){return function(t){d(e).then((function(n){t({type:p,payload:e}),t({type:O,payload:n.books}),t({type:h,payload:n.total}),t({type:f,payload:n.page})}))}}(t))},count:g}),Object(S.jsx)("main",{children:Object(S.jsxs)(U.c,{children:[Object(S.jsx)(U.a,{path:"/embawood-frontend-task",element:Object(S.jsx)(K,{books:t,total:r,booksPerPage:o,page:a,query:n,getCurrentPage:function(t,n){e(function(e,t){return function(n){u(e,t).then((function(t){n({type:O,payload:t.books}),n({type:f,payload:t.page}),n({type:h,payload:t.total}),n({type:p,payload:e})}))}}(t,n))},setCount:k})}),Object(S.jsx)(U.a,{path:"/cart",element:Object(S.jsx)(P,{cart:s})})]})})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,126)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))},V=n(60),Y=n(77),X={books:[],query:"all",page:1,total:0,booksPerPage:10},Z=Object(V.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(D.a)(Object(D.a)({},e),{},{books:t.payload});case h:return Object(D.a)(Object(D.a)({},e),{},{total:t.payload});case f:return Object(D.a)(Object(D.a)({},e),{},{page:t.payload});case p:return Object(D.a)(Object(D.a)({},e),{},{query:t.payload});default:return e}}),Object(V.a)(Y.a));window.store=Z,o.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(x.a,{store:Z,children:Object(S.jsx)(w.a,{children:Object(S.jsx)(z,{})})})}),document.getElementById("root")),Q()},72:function(e,t,n){e.exports={header:"Header_header__2py7V"}},76:function(e,t,n){e.exports={booksWrapper:"Books_booksWrapper__34EMt",cardWrapper:"Books_cardWrapper__19Ee9"}},83:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.7f4b14c1.chunk.js.map